<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Benjamin and Samuel's Interactive Story</title>
</head>
<body>
    
    <div id="intro">
        <h1>The One Who Got Away</h1>
    </div>
    <div id="story">

    </div>

    <div id="buttons">

    </div>

    <script>
    
        let storyContainer = document.getElementById("story");
    
        let buttonContainer = document.getElementById("buttons");
        let history = ["intro"];
        const story = {
            intro : {
                text : "Ross, Chandler, Joey, Rachel, Monica, and Phoebe decide to go buy dessert at a Japanese bakery, when a Bank of America gets robbed.",
                choices : [
                    ["Watch robbery occur at bank", "choice1"],
                    ["Walk away", "choice2"],
                    ["Try to stop robber", "choice3"]
                ]
            },
            choice1 : {
                text : "They see the robbery happening in front of their eyes and are just bystanders that stare. They hope nothing happens and Monica calls the police. '911, what's your emergency?' says a dispatcher on the other end. 'There is a robbery at the Bank Of America at 9th Street.' Monica replied. The dispatcher said, 'Okay, we are coming to your location, please stay away from the crime scene and avoid any confrontation with the robber, as he may be dangerous.' 'Okay, thank you.' Monica said in a whispered tone. Rachel whispers to Monica, 'Hang up the call.' Monica proceeds to hang up the call. As soon as Monica hangs up the call, they see the robber walking out of the bank. It was a male person in their late 20s, with blonde hair and around 6 ft tall. The whole group just stares as he walks away from the crime scene. Soon after, the police arrives at the crime scene.",
                choices : [
                    ["Continue", "choice1a"]
                ]
            },
            choice1a : {
                text : "When the police confront them, they stay mostly quiet. They don't say anything to the police about the robber.",
                choices : [
                    ["", "choice5"]
                ]
            },
            choice2 : {
                text : "The group feels bad about walking away, and return. They find money on the floor and pick it up.",
                choices : [
                    ["", "choice3"],
                    ["", "choice4"],
                    ["", "choice5"]
                ]
            },
            choice3 : {
                text : "They try and confront the robber. They walk over to the bank, and Joey stares eye-to-eye at the robber.",
                choices : [
                    ["", "choice4"],
                    ["", "choice5"]
                ]
            },
            choice4 : {
                text : "Look for robber.",
                choices : [
                    ["", "choice5"]
                ]
            },
            choice5 : {
                text : "Fight robber.",
                choices : []
            }
        }
        function makeButton(btnText, choice){
            let button = document.createElement("button");
            button.innerHTML = btnText;
            buttonContainer.appendChild(button);
            button.addEventListener ("click", function() {
                history.push(choice);
                showStory();
            });
        }
        function buildStory(text) {
            let storyItem = document.createElement("p");
            storyItem.innerText = text;
            storyContainer.appendChild(storyItem);
        }
        function showStory(){
            let currentPage = history[history.length - 1]; // set currentPage to last index of history array.
            storyContainer.innerHTML = ""; // reset html
            buttonContainer.innerHTML = ""; // reset buttons
            
            for(let page of history){ // build story text from items in history array
                buildStory(story[page].text);
            }
            
            for(let choice of story[currentPage].choices){ // build buttons from choices property of most recent story choice
                makeButton(choice[0], choice[1])
            }
        }
        showStory();
        
        
    </script>
      
</body>
</html>